flatpickr("#fromDate",{dateFormat:"d/m/Y"}),flatpickr("#toDate",{dateFormat:"d/m/Y"});let activeTag="";function parseDMY(e){const[t,n,s]=e.split("/").map(Number);return new Date(s,n-1,t)}function isSameDate(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function filterTable(e=!1){e&&clearTag();const n=document.getElementById("searchInput").value.toLowerCase(),s=document.getElementById("fromDate").value,o=document.getElementById("toDate").value,i=document.getElementById("statusFilter")?.value||"all",a=document.querySelectorAll("#postTable tbody tr");let t=new Date;t.setHours(0,0,0,0),a.forEach(e=>{const c=e.cells[0].textContent.toLowerCase(),l=e.cells[0].querySelector("span")?.textContent.toLowerCase()||"",d=e.cells[1].textContent.trim(),a=parseDMY(d);let r=!0;if(n&&!c.includes(n)&&!l.includes(n)&&(r=!1),s&&a<parseDMY(s)&&(r=!1),o&&a>parseDMY(o)&&(r=!1),r&&activeTag)switch(activeTag){case"today":r=isSameDate(a,t);break;case"yesterday":const s=new Date(t);s.setDate(t.getDate()-1),r=isSameDate(a,s);break;case"tomorrow":const o=new Date(t);o.setDate(t.getDate()+1),r=isSameDate(a,o);break;case"thisWeek":const e=new Date(t);e.setDate(t.getDate()-t.getDay());const i=new Date(e);i.setDate(e.getDate()+6),r=a>=e&&a<=i;break;case"lastWeek":const n=new Date(t);n.setDate(t.getDate()-t.getDay()-7);const c=new Date(n);c.setDate(n.getDate()+6),r=a>=n&&a<=c;break;case"thisMonth":r=a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear();break;case"nextMonth":const l=(t.getMonth()+1)%12,d=t.getMonth()===11?t.getFullYear()+1:t.getFullYear();r=a.getMonth()===l&&a.getFullYear()===d;break}r&&i==="active"?r=a>=t:r&&i==="closed"&&(r=a<t),r?(e.style.display="",e.classList.remove("past","today","future"),isSameDate(a,t)?e.classList.add("today"):a<t?e.classList.add("past"):e.classList.add("future")):e.style.display="none"}),showActiveTag()}function filterByTag(e){document.getElementById("searchInput").value="",document.getElementById("fromDate").value="",document.getElementById("toDate").value="",activeTag=e,filterTable(!1),document.querySelectorAll(".quick-tags button").forEach(e=>e.classList.remove("active")),[...document.querySelectorAll(".quick-tags button")].find(t=>t.textContent.replace(/\s/g,"").toLowerCase()===e.toLowerCase())?.classList.add("active")}function resetFilters(){document.getElementById("searchInput").value="",document.getElementById("fromDate").value="",document.getElementById("toDate").value="",document.getElementById("statusFilter").value="all",activeTag="",filterTable(!1)}function clearTag(){activeTag=""}function showActiveTag(){const s={today:"Today",yesterday:"Yesterday",tomorrow:"Tomorrow",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",nextMonth:"Next Month"},t=document.getElementById("statusFilter")?.value||"all";let e="";t==="active"?e="Active":t==="closed"&&(e="Closed");let n=activeTag?s[activeTag]:"";document.getElementById("selectedTag").textContent=e||n?`${e} ${n}`.trim():""}function shareOnWhatsApp(){const i=document.querySelectorAll("#postTable tbody tr"),a=Array.from(i).filter(e=>e.style.display!=="none"),t=a.slice(0,20);if(t.length===0){alert("No posts to share.");return}const n={today:"Today",yesterday:"Yesterday",tomorrow:"Tomorrow",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",nextMonth:"Next Month"},s=document.getElementById("statusFilter")?.value||"all";let e=">ðŸ”” Alert:";s!=="all"&&(e+=` ${s}`),activeTag&&n[activeTag]&&(e+=` ${n[activeTag]}`);let o=e+`
`;t.forEach(e=>{const t=e.cells[0].querySelector("a"),s=t?t.textContent.trim():e.cells[0].textContent.trim(),i=t?t.getAttribute("href").trim():"",n=e.dataset.shorturl?.trim()||"",a=e.dataset.seoTitle?.trim()||s,r=e.cells[1].textContent.trim(),c=n?`https://yojnaportal.com/${n}`:i;o+=`ðŸŽ¯ *${a}* 
ðŸ“… _Last Date: ${r}_
ðŸ”— ${c}
__________________________________________
`});const r=encodeURIComponent(o.trim()),c=`https://wa.me/?text=${r}`;window.open(c,"_blank")}