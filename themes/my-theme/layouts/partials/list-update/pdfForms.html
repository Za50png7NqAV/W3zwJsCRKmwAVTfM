<h2>{{ .Title }}</h2>

<!-- PDF Forms Section -->
<section id="pdf-section">

  <!-- Search Bar -->
<input type="text" id="pdfSearch" placeholder="Search PDF / Category..."
       style="width:100%; padding:8px; margin-bottom:10px; font-size:1rem;">


  <!-- Auto Category Tabs with Horizontal Scroll -->
  <div class="pdf-tabs-wrapper" oninput="searchPDFTable()">
    <div class="pdf-tabs">
      <button onclick="filterPDFTable('all', event)" class="active" >All Forms</button>
      {{ $allCategories := slice }}
      {{ range .Params.pdfforms }}
        {{ range .categories }}
          {{ if not (in $allCategories .) }}
            {{ $allCategories = $allCategories | append . }}
          {{ end }}
        {{ end }}
      {{ end }}
      {{ range $allCategories }}
        <button onclick="filterPDFTable('{{ . }}', event)">{{ . | title }}</button>
      {{ end }}
    </div>
  </div>
  

  <!-- PDF Form Table -->
  <table class="pdf-table"  id="pdfTable">
    <thead>
      <tr>
         <th>‡§π‡§ø‡§®‡•ç‡§¶‡•Ä ‡§®‡§æ‡§Æ</th>
        <th>PDF Forms</th>
      </tr>
    </thead>
    <tbody>
      {{ range .Params.pdfforms }}
        <tr data-category="{{ delimit .categories "," }}">
         <td> <a href="{{ .downloadlink }}" target="_blank"><span style="color:#333; font-size:1rem;"> {{ .hindi }}</span></a></td>
          <td><span style="font-size:1.2rem;"><a href="{{ .downloadlink }}" target="_blank">{{ .title }}</a></span>
            <br><span class="pdf-tags" style="font-size:1.2rem;">
  {{ $total := len .categories }}
  {{ range $i, $cat := .categories }}
    <span class="pdf-category"
          data-category="{{ $cat }}">
      {{ $cat }}
    </span>{{ if lt (add $i 1) $total }} {{ end }}
  {{ end }}
</span></td>



        </tr>
      {{ end }}
    </tbody>
  </table>

</section>

<script>
const searchInput = document.getElementById("pdfSearch");
const rows = document.querySelectorAll("#pdfTable tbody tr");
const buttons = document.querySelectorAll(".pdf-tabs button");

/* URL update */
function updateURL(search, category) {
  const params = new URLSearchParams(window.location.search);

  search ? params.set("search", search) : params.delete("search");
  category && category !== "all" ? params.set("category", category) : params.delete("category");

  const newURL = window.location.pathname + "?" + params.toString();
  window.history.replaceState({}, "", newURL);
}

/* Main filter */
function filterPDFTable(category = "all", event = null) {

  if (event) {
    buttons.forEach(btn => btn.classList.remove("active"));
    event.target.classList.add("active");

    if (category !== "all") {
      searchInput.value = category;
    }
  }

  const searchText = searchInput.value.toLowerCase();

  rows.forEach(row => {
    const categories = row.dataset.category.toLowerCase();
    const text = row.innerText.toLowerCase();

    const matchCategory = category === "all" || categories.includes(category.toLowerCase());
    const matchSearch = text.includes(searchText);

    row.style.display = (matchCategory && matchSearch) ? "" : "none";
  });

  updateURL(searchText, category);
}

/* Typing search */
searchInput.addEventListener("keyup", () => {
  const activeBtn = document.querySelector(".pdf-tabs button.active");
  const activeCategory = activeBtn ? activeBtn.dataset.category : "all";
  filterPDFTable(activeCategory);
});

/* Category text click */
document.querySelectorAll(".pdf-category").forEach(cat => {
  cat.addEventListener("click", function () {
    searchInput.value = this.innerText.trim();
    filterPDFTable("all");
  });
});

/* üî• PAGE LOAD ‚Üí URL SE DATA READ */
window.addEventListener("DOMContentLoaded", () => {
  const params = new URLSearchParams(window.location.search);
  const search = params.get("search") || "";
  const category = params.get("category") || "all";

  searchInput.value = search;

  buttons.forEach(btn => {
    if (btn.dataset.category === category) {
      btn.classList.add("active");
    } else {
      btn.classList.remove("active");
    }
  });

  filterPDFTable(category);
});
</script>
<script>
document.querySelectorAll(".pdf-category").forEach(cat => {
  cat.addEventListener("click", function () {

    const value = this.dataset.category.trim();
    const searchInput = document.getElementById("pdfSearch");

    searchInput.value = value;

    document.querySelectorAll(".pdf-category")
      .forEach(el => el.classList.remove("active"));
    this.classList.add("active");

    filterPDFTable("all");
  });
});
</script>

<style>
/* ===== Root Theme ===== */
:root{
  --primary:#2563eb;      /* blue */
  --primary-soft:#e0ebff;
  --text:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --bg:#f8fafc;
  --radius:14px;
}
.pdf-tags {
  line-height: 1.6;
}

.pdf-category {
  display: inline-block;
  padding: 3px 10px;
  margin: 2px 3px;
  font-size: 0.9rem;
  border-radius: 8px;
  background: #f5f5f5;
  color: #020000;
  cursor: pointer;
  border: 1px solid #ddd;
  transition: all 0.25s ease;
}

/* Hover effect */
.pdf-category:hover {
  background: #020000;
  color: #fff;
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

/* Active / Selected */
.pdf-category.active {
  background: #020000;
  color: #fff;
  border-color: #020000;
}
/* Section */
.pdf-section{
  margin:16px 0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);
}

/* ===== Search Bar ===== */
.pdf-searchbar{
  position: sticky;
  top: 0;
  z-index: 10;
  background: linear-gradient(180deg,#fff 70%,transparent);
  padding:12px 0 10px;
  display:flex;
  gap:10px;
  align-items:center;
}

#pdfSearch{
  width:100%;
  padding:14px 16px;
  font-size:1rem;
  border:1px solid var(--border);
  border-radius:var(--radius);
  outline:none;
  background:#fff;
  transition:0.25s;
}
#pdfSearch:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 4px rgba(37,99,235,.15);
}

.pdf-count{
  font-size:.85rem;
  color:var(--muted);
  padding:10px 14px;
  border:1px solid var(--border);
  border-radius:var(--radius);
  background:#fff;
}

/* ===== Tabs ===== */
.pdf-tabs-wrapper{
  margin:10px 0 14px;
  overflow-x:auto;
}

.pdf-tabs{
  display:flex;
  gap:10px;
  padding-bottom:6px;
}

.pdf-tabs button{
  border:1px solid var(--border);
  background:#fff;
  padding:10px 16px;
  border-radius:999px;
  cursor:pointer;
  font-size:.9rem;
  color:var(--text);
  transition:.25s;
  white-space:nowrap;
}

.pdf-tabs button:hover{
  background:var(--primary-soft);
}

.pdf-tabs button.active{
  background:var(--primary);
  color:#fff;
  border-color:var(--primary);
}

/* ===== Table Card ===== */
.pdf-table-wrap{
  border:1px solid var(--border);
  border-radius:18px;
  overflow:hidden;
  background:#fff;
  box-shadow:0 8px 20px rgba(0,0,0,.04);
}

/* Table */
.pdf-table{
  width:100%;
  border-collapse:collapse;
}

.pdf-table thead th{
  text-align:left;
  font-size:.9rem;
  padding:16px;
  background:var(--bg);
  border-bottom:1px solid var(--border);
  color:#020617;
}

.pdf-table tbody td{
  padding:16px;
  border-bottom:1px solid var(--border);
  vertical-align:top;
}

.pdf-table tbody tr:hover{
  background:#f9fbff;
}

/* ===== Links ===== */
.pdf-mainlink{
  color:var(--primary);
  text-decoration:none;
  font-weight:600;
}
.pdf-mainlink:hover{ text-decoration:underline; }

.pdf-title{
  display:block;
  font-size:1.05rem;
  font-weight:700;
  color:#020617;
  margin-bottom:8px;
  text-decoration:none;
}
.pdf-title:hover{ text-decoration:underline; }

/* ===== Tags ===== */
.pdf-tags{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.pdf-tag{
  padding:6px 12px;
  font-size:.8rem;
  border-radius:999px;
  background:var(--primary-soft);
  color:var(--primary);
  border:1px solid transparent;
  cursor:pointer;
  transition:.2s;
}
.pdf-tag:hover{
  border-color:var(--primary);
}

/* Empty */
.pdf-empty{
  padding:24px;
  text-align:center;
  font-size:1rem;
  color:var(--muted);
}

/* ===== Mobile Card View ===== */
@media (max-width:640px){
  .pdf-count{display:none;}
  .pdf-table thead{display:none;}

  .pdf-table,
  .pdf-table tbody,
  .pdf-table tr,
  .pdf-table td{
    display:block;
    width:100%;
  }

  .pdf-table tbody tr{
    padding:14px;
    border-bottom:1px solid var(--border);
  }

  .pdf-table tbody td{
    padding:0;
    border:0;
  }

  .pdf-td-title{margin-bottom:10px;}
}
</style>

