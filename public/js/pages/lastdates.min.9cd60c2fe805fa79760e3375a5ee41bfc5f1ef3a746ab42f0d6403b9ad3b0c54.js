flatpickr("#fromDate",{dateFormat:"d/m/Y"}),flatpickr("#toDate",{dateFormat:"d/m/Y"});let activeTag="";function parseDMY(e){const[t,n,s]=e.split("/").map(Number);return new Date(s,n-1,t)}function isSameDate(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function filterTable(e=!1){e&&clearTag();const s=document.getElementById("searchInput").value.toLowerCase(),i=document.getElementById("fromDate").value,a=document.getElementById("toDate").value,r=document.querySelectorAll("#postTable tbody tr");let t=new Date,o=Array.from(r).map(e=>parseDMY(e.cells[1].textContent.trim())),c=o.some(e=>isSameDate(e,t)),l=o.some(e=>e>t),d=o.some(e=>e<t);const n=document.querySelector("#postTable thead");n.className="",c?n.classList.add("today"):d&&!l?n.classList.add("past"):n.classList.add("future"),r.forEach(e=>{const r=e.cells[0].textContent.toLowerCase(),c=e.cells[0].querySelector("span")?.textContent.toLowerCase()||"",l=e.cells[1].textContent.trim(),n=parseDMY(l);let o=!0;s&&!r.includes(s)&&!c.includes(s)&&(o=!1),i&&n<parseDMY(i)&&(o=!1),a&&n>parseDMY(a)&&(o=!1),o?(e.style.display="",e.classList.remove("past","today","future"),isSameDate(n,t)?e.classList.add("today"):n<t?e.classList.add("past"):e.classList.add("future")):e.style.display="none"}),document.querySelectorAll(".quick-tags button").forEach(e=>{e.classList.remove("active")})}function filterByTag(e){document.getElementById("searchInput").value="",document.getElementById("fromDate").value="",document.getElementById("toDate").value="",activeTag=e,showActiveTag();const t=new Date,s=document.querySelectorAll("#postTable tbody tr"),n=document.querySelector("#postTable thead");e==="today"?n.className="today":["yesterday","lastWeek"].includes(e)?n.className="past":n.className="future",document.querySelectorAll(".quick-tags button").forEach(e=>e.classList.remove("active")),[...document.querySelectorAll(".quick-tags button")].find(t=>t.textContent.replace(/\s/g,"").toLowerCase()===e.toLowerCase()).classList.add("active"),s.forEach(n=>{const i=n.cells[1].textContent.trim(),s=parseDMY(i);let o=!1;switch(e){case"today":o=isSameDate(s,t);break;case"yesterday":const i=new Date(t);i.setDate(t.getDate()-1),o=isSameDate(s,i);break;case"tomorrow":const a=new Date(t);a.setDate(t.getDate()+1),o=isSameDate(s,a);break;case"thisWeek":const e=new Date(t);e.setDate(t.getDate()-t.getDay());const r=new Date(e);r.setDate(e.getDate()+6),o=s>=e&&s<=r;break;case"lastWeek":const n=new Date(t);n.setDate(t.getDate()-t.getDay()-7);const c=new Date(n);c.setDate(n.getDate()+6),o=s>=n&&s<=c;break;case"thisMonth":o=s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear();break;case"nextMonth":const l=(t.getMonth()+1)%12,d=t.getMonth()===11?t.getFullYear()+1:t.getFullYear();o=s.getMonth()===l&&s.getFullYear()===d;break}o?(n.style.display="",n.classList.remove("past","today","future"),isSameDate(s,t)?n.classList.add("today"):s<t?n.classList.add("past"):n.classList.add("future")):n.style.display="none"})}function resetFilters(){document.getElementById("searchInput").value="",document.getElementById("fromDate").value="",document.getElementById("toDate").value="",activeTag="",showActiveTag(),filterTable(!1)}function clearTag(){activeTag="",showActiveTag()}function showActiveTag(){const e={today:"Today",yesterday:"Yesterday",tomorrow:"Tomorrow",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",nextMonth:"Next Month"};document.getElementById("selectedTag").textContent=activeTag?` ${e[activeTag]}`:""}function shareOnWhatsApp(){const o=document.querySelectorAll("#postTable tbody tr"),i=Array.from(o).filter(e=>e.style.display!=="none"),e=i.slice(0,20);if(e.length===0){alert("No posts to share.");return}const t={today:"Today",yesterday:"Yesterday",tomorrow:"Tomorrow",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",nextMonth:"Next Month"};let n=">ðŸ”” Alert:";typeof activeTag!="undefined"&&t[activeTag]&&(n+=` last date ${t[activeTag]}`);let s=n+`
`;e.forEach(e=>{const t=e.cells[0].querySelector("a"),o=t?t.textContent.trim():e.cells[0].textContent.trim(),i=t?t.getAttribute("href").trim():"",n=e.dataset.shorturl?.trim()||"",a=e.dataset.seoTitle?.trim()||o,r=e.cells[1].textContent.trim(),c=n?`https://yojnaportal.com/${n}`:i;s+=`ðŸŽ¯ *${a}* 
ðŸ“… _Last Date: ${r}_
ðŸ”— ${c}
__________________________________________
`});const a=encodeURIComponent(s.trim()),r=`https://wa.me/?text=${a}`;window.open(r,"_blank")}