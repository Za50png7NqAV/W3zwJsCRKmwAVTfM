flatpickr("#fromDate",{dateFormat:"d/m/Y"}),flatpickr("#toDate",{dateFormat:"d/m/Y"});let activeTag="";function parseDMY(e){const[t,n,s]=e.split("/").map(Number);return new Date(s,n-1,t)}function isSameDate(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function filterTable(e=!1){e&&clearTag();const n=document.getElementById("searchInput").value.toLowerCase(),s=document.getElementById("fromDate").value,o=document.getElementById("toDate").value,i=document.querySelectorAll("#postTable tbody tr");let t=new Date;t.setHours(0,0,0,0),i.forEach(e=>{const r=e.cells[0].textContent.toLowerCase(),c=e.cells[0].querySelector("span")?.textContent.toLowerCase()||"",l=e.cells[1].textContent.trim(),i=parseDMY(l);let a=!0;if(n&&!r.includes(n)&&!c.includes(n)&&(a=!1),s&&i<parseDMY(s)&&(a=!1),o&&i>parseDMY(o)&&(a=!1),a&&activeTag)switch(activeTag){case"today":a=isSameDate(i,t);break;case"yesterday":const s=new Date(t);s.setDate(t.getDate()-1),a=isSameDate(i,s);break;case"tomorrow":const o=new Date(t);o.setDate(t.getDate()+1),a=isSameDate(i,o);break;case"thisWeek":const e=new Date(t);e.setDate(t.getDate()-t.getDay());const r=new Date(e);r.setDate(e.getDate()+6),a=i>=e&&i<=r;break;case"lastWeek":const n=new Date(t);n.setDate(t.getDate()-t.getDay()-7);const c=new Date(n);c.setDate(n.getDate()+6),a=i>=n&&i<=c;break;case"thisMonth":a=i.getMonth()===t.getMonth()&&i.getFullYear()===t.getFullYear();break;case"nextMonth":const l=(t.getMonth()+1)%12,d=t.getMonth()===11?t.getFullYear()+1:t.getFullYear();a=i.getMonth()===l&&i.getFullYear()===d;break;case"active":a=i>=t;break;case"closed":a=i<t;break}a?(e.style.display="",e.classList.remove("past","today","future"),isSameDate(i,t)?e.classList.add("today"):i<t?e.classList.add("past"):e.classList.add("future")):e.style.display="none"}),showActiveTag()}function filterByTag(e){document.getElementById("searchInput").value="",document.getElementById("fromDate").value="",document.getElementById("toDate").value="",activeTag=e,filterTable(!1),document.querySelectorAll(".quick-tags button").forEach(e=>e.classList.remove("active")),[...document.querySelectorAll(".quick-tags button")].find(t=>t.textContent.replace(/\s/g,"").toLowerCase()===e.toLowerCase())?.classList.add("active")}function resetFilters(){document.getElementById("searchInput").value="",document.getElementById("fromDate").value="",document.getElementById("toDate").value="",activeTag="",filterTable(!1)}function clearTag(){activeTag=""}function showActiveTag(){const e={today:"Today",yesterday:"Yesterday",tomorrow:"Tomorrow",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",nextMonth:"Next Month",active:"Active",closed:"Closed"};document.getElementById("selectedTag").textContent=activeTag?` ${e[activeTag]}`:""}function shareOnWhatsApp(){const o=document.querySelectorAll("#postTable tbody tr"),i=Array.from(o).filter(e=>e.style.display!=="none"),e=i.slice(0,20);if(e.length===0){alert("No posts to share.");return}const t={today:"Today",yesterday:"Yesterday",tomorrow:"Tomorrow",thisWeek:"This Week",lastWeek:"Last Week",thisMonth:"This Month",nextMonth:"Next Month",active:"Active",closed:"Closed"};let n=">ðŸ”” Alert:";activeTag&&t[activeTag]&&(n+=` ${t[activeTag]}`);let s=n+`
`;e.forEach(e=>{const t=e.cells[0].querySelector("a"),o=t?t.textContent.trim():e.cells[0].textContent.trim(),i=t?t.getAttribute("href").trim():"",n=e.dataset.shorturl?.trim()||"",a=e.dataset.seoTitle?.trim()||o,r=e.cells[1].textContent.trim(),c=n?`https://yojnaportal.com/${n}`:i;s+=`ðŸŽ¯ *${a}* 
ðŸ“… _Last Date: ${r}_
ðŸ”— ${c}
__________________________________________
`});const a=encodeURIComponent(s.trim()),r=`https://wa.me/?text=${a}`;window.open(r,"_blank")}